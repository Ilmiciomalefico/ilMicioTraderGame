<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cyber Trader Cat - Lite</title>
    <style>
        body {
            margin: 0;
            background: #0a0b0d;
            color: #e2e8f0;
            font-family: 'Inter', system-ui, sans-serif;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #ui-layer {
            position: absolute;
            top: 20px;
            left: 20px;
            z-index: 10;
            pointer-events: none;
        }

        .stat {
            font-size: 1.2rem;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .price { color: #00ff88; font-family: monospace; }
        .leverage { color: #ff3366; }

        #game-container {
            width: 100vw;
            height: 100vh;
            cursor: pointer;
        }

        .controls-hint {
            position: absolute;
            bottom: 20px;
            color: #64748b;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>

    <div id="ui-layer">
        <div class="stat">Price: <span id="price-val" class="price">0.0000</span></div>
        <div class="stat">Lev: <span class="leverage">20x</span></div>
        <div id="status" class="stat" style="color: #64748b;">HOLDING...</div>
    </div>

    <div id="game-container">
        <canvas id="gameCanvas"></canvas>
    </div>

    <div class="controls-hint">Klikni in drži za LONG | Spusti za SHORT</div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const priceEl = document.getElementById('price-val');
        const statusEl = document.getElementById('status');

        let width, height;
        let points = [];
        let catY = 0;
        let targetCatY = 0;
        let isLong = false;
        let currentPrice = 42000;
        let scrollX = 0;

        // Nastavitve
        const config = {
            pointsCount: 50,
            pointSpacing: 40,
            smoothness: 0.15,
            neonColor: '#00ff88',
            catColor: '#ffffff'
        };

        function init() {
            resize();
            // Generiranje začetnega grafa
            for (let i = 0; i < config.pointsCount; i++) {
                points.push(height / 2 + (Math.random() - 0.5) * 100);
            }
            catY = points[10];
            animate();
        }

        function resize() {
            width = window.innerWidth;
            height = window.innerHeight;
            canvas.width = width;
            canvas.height = height;
        }

        // Glavna logika premikanja
        function update() {
            // Generiranje nove cene (simuliran graf)
            const lastPoint = points[points.length - 1];
            const volatility = 5;
            const nextPoint = lastPoint + (Math.random() - 0.5) * volatility;
            
            points.push(nextPoint);
            if (points.length > config.pointsCount) points.shift();

            // Simulacija cene v UI
            currentPrice += (nextPoint - lastPoint) * 10;
            priceEl.innerText = currentPrice.toFixed(2);

            // Mačka sledi grafu z zamikom ali switcha med robovi
            const playerXIndex = 10; // Mačka je fiksirana na 10. točki grafa
            const baselineY = points[playerXIndex];
            
            // Če držimo Long, gre mačka nad graf, če ne, pod graf
            const offset = isLong ? -30 : 30;
            targetCatY = baselineY + offset;
            
            // Gladko premikanje (Lerp)
            catY += (targetCatY - catY) * config.smoothness;
        }

        function draw() {
            ctx.clearRect(0, 0, width, height);

            // 1. Izris mreže (Grid)
            ctx.strokeStyle = '#1e293b';
            ctx.lineWidth = 1;
            for(let i = 0; i < width; i += 50) {
                ctx.beginPath();
                ctx.moveTo(i, 0);
                ctx.lineTo(i, height);
                ctx.stroke();
            }

            // 2. Izris grafa (Glavna linija)
            ctx.beginPath();
            ctx.strokeStyle = isLong ? '#00ff88' : '#ff3366';
            ctx.lineWidth = 3;
            ctx.shadowBlur = 15;
            ctx.shadowColor = ctx.strokeStyle;
            
            for (let i = 0; i < points.length; i++) {
                const x = i * config.pointSpacing;
                const y = points[i];
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();
            ctx.shadowBlur = 0;

            // 3. Izris mačke (Igralec)
            const playerX = 10 * config.pointSpacing;
            
            // Telo mačke (poenostavljeno v neon krog za "pro" izgled)
            ctx.fillStyle = config.catColor;
            ctx.beginPath();
            ctx.arc(playerX, catY, 10, 0, Math.PI * 2);
            ctx.fill();
            
            // Aura okoli mačke
            ctx.strokeStyle = config.catColor;
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.arc(playerX, catY, 15 + Math.sin(Date.now()/200)*3, 0, Math.PI * 2);
            ctx.stroke();
        }

        function animate() {
            update();
            draw();
            requestAnimationFrame(animate);
        }

        // Kontrole
        window.addEventListener('mousedown', () => { 
            isLong = true; 
            statusEl.innerText = 'LONG POSITION';
            statusEl.style.color = '#00ff88';
        });
        window.addEventListener('mouseup', () => { 
            isLong = false; 
            statusEl.innerText = 'SHORT POSITION';
            statusEl.style.color = '#ff3366';
        });
        window.addEventListener('touchstart', (e) => { e.preventDefault(); isLong = true; });
        window.addEventListener('touchend', () => { isLong = false; });
        window.addEventListener('resize', resize);

        init();
    </script>
</body>
</html>
